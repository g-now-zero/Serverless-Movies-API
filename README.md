# Serverless-Movies-API

## Objective:
- Create an API with serverless functions that shows movie information.

## Planning steps:
### 1. Map out cloud infrastructure
Requirements:
- SDK to set up cloud infra
- NoSQL database, cloud storage and serverless functions
### 2. Data preparation
Requirements:
- Find movie data to be stored in the cloud NoSQL db
- Store movie cover images of each movie in cloud storage
### 3. Create serverless functions
- GetMovies: Returns a JSON list of all movies in db *response should have a url of the movie cover
- GetMoviesByYear: Returns a list of movies released in a specified year *year should be provided by client
- GetMovieSummary: Return a summary generated by AI for a specified movie.

## Infrastructure planning
**Cloud service provider**: *Azure*
- Considerations: Choosing due to familiarity and to take advantage of Student Account

**Azure Functions**: HTTP-triggered functions for the three end points
- Considerations: Pay-per-execution model which will work out well for resources

**Azure Cosmos DB**: NoSQL database for movie information

**Blob Storage**: cost-effective storage for storing the movie covers and each image gets a public url

**Azure OpenAI Service**: For the summary generation *which will connect to GetMovieSummary function

## Deployment Choice 
**IaC with Terraform**: resource group creation, cosmos DB account setup, etc.

**Azure CLI (Config Mgmt)**: db and container creation, storage container setup, etc.

## Data Structure Design
- Year-based documents with alphabetical subgrouping
```json
{
    "id": "<year>",
    "year": "<year>",
    "alphabetical": {
        "a": { "movies": ["title": "Nosferatu".
                          "genre": ""
                          "coverURL": "",
                          "generatedSummary": ""] },
        "b": { "movies": [] }
    }
}
```

#### Query flow
GetMovies:
-> Scan year documents, combine all alphabet sections

GetMoviesByYear:
-> Single document fetch by year

GetMovieSummary:
-> Year + alphabetical section lookup

### TO-DO
- [ ] Draw a diagram of the data flow through the chosen architecture
- [ ] Find dataset
- [ ] Clean up dataset based on requirements
- [ ] Set up Azure infrastructure
- [ ] Implement db schema
- [ ] Create first endpoint